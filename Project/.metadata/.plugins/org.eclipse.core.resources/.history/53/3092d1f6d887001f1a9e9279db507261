<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>

<%@ page import="com.patient.Appointment" %>
<%@ page import="java.util.List" %>

<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Appointment Details</title>
<link rel="stylesheet" href="${pageContext.request.contextPath}/css/display.css">
</head>
<body>
	<div class="nav">
        <div class="nav-logo">
            <p>LOGO</p>
        </div>
        <div class="nav-menu">
            <ul>
                <li><a href="doctorHome.jsp" class="link">Home</a></li>
                <li><a href="setAvailability.jsp" class="link">Set Availability</a></li>
                <li><a href="availabilityList.jsp" class="link">Availabilities</a></li>
                <li><a href="appointmentsList.jsp" class="link active">Appointments</a></li>
                <li><a href="PatientAccServlet" class="link">Profile</a></li>
            </ul>
        </div>
     </div>
     <div class="wrapper">
     	<div class="table-box">
     		<header>Appointments</header>
				<table>
					<tr>
						<th>Appointment ID</th>
						<th>Name</th>
						<th>Phone</th>
						<th>Record number</th>
						<th>Date</th>
						<th>Time</th>
						<th>Reason</th>
					</tr>
					
					<%
			            // Retrieve the list of appointments from the request attribute
			            List<Appointment> appointments = (List<Appointment>) request.getAttribute("appointments");
			
			            if (appointments != null) {
			                // Loop through the appointments and display each one in the table
			                for (Appointment appt : appointments) {
						        %>
							        <tr>
							            <td><%= appt.getId() %></td>
							            <td><%= appt.getName() %></td>
							            <td><%= appt.getPhone() %></td>
							            <td><%= appt.getR_num() %></td>
							            <td><%= appt.getDate() %></td>
							            <td><%= appt.getTime() %></td>
							            <td><%= appt.getReason() %></td>
							        </tr>
						        <%
						        }
						            } else {
						        %>
						        <tr>
						            <td colspan="7">No appointments found</td>
						        </tr>
						        <%
						            }
						        %>
			</table>
		</div>
	</div>
</body>
</html>